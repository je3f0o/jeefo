/**
 * jeefo     : v0.0.13
 * Author    : je3f0o, <je3f0o@gmail.com>
 * Homepage  : https://github.com/je3f0o/jeefo
 * License   : The MIT License
 * Copyright : 2016
 **/
!function(){"use strict";var e=function(){var e=Array,n=e.isArray,r=Object.keys,t=function(e){for(var n,t,i,o=1;o<arguments.length;++o)if(n=arguments[o])for(t=r(n),i=t.length-1;i>=0;--i)e[t[i]]=n[t[i]];return e},i=function(e){throw new Error(e)},o=function(n,r){var t=[],o={};return function s(u,c){var a=c.length-1,d=new e(a+1),f=r(u);for(d[a]=c[a];a>=0;d[a]=c[a],--a);for(d.push(u),o[u]=!0,a=0;a<f.length;++a)d.indexOf(f[a])>=0&&i("Circular dependency '"+f[a]+" is required by '"+n+"' : "+d.join(" -> ")),o.hasOwnProperty(f[a])||s(f[a],d);-1===t.indexOf(u)&&t.push(u)}(n,[]),t},s=function(e){function n(){return 0===i}function r(e,n){return new s(function(r,s){switch(i){case 1:return r(e(t));case 2:return s(n(t));default:o[c]=e,o[c+1]=n,o[c+2]=r,o[c+3]=s,c+=4}})}var t,i=0,o=[],u=this,c=0;return u.then=r,u.state="pending...",u.is_pending=n,e(function(e){if(0===i){i=1,u.state="resolved",u.value=t=e;for(var n=0;n<c;n+=4)e=o[n](t),e&&"JEEFO_PROMISE"===e.type?e.then(o[n+2],o[n+3]):o[n+2](e);o=null,c=0}},function(e){if(0===i){i=2,u.state="rejected",u.reason=t=e;for(var n=1;n<c;n+=4)e=o[n](t),e&&"JEEFO_PROMISE"===e.type?e.then(o[n+1],o[n+2]):o[n+2](e);o=null,c=0}}),u};s.prototype.type="JEEFO_PROMISE";var u={defer:function(){var e={};return e.promise=new s(function(n,r){e.resolve=n,e.reject=r}),e},when:function(e){return e&&"JEEFO_PROMISE"===e.type?e:new s(function(n){n(e)})},for_each_async:function(e,n){function r(){++t<e.length?n.call(e,e[t],t,r,e):i.resolve()}var t=-1,i=this.defer();return r(),i.promise},all:function(e){for(var n,r=0,t=this.defer(),i=0;r<e.length;++r)(n=e[r])&&"JEEFO_PROMISE"===n.type&&(i+=1,n.then(function(n){return function(r){e[n]=r,0===--i&&t.resolve(e)}}(r)));return 0===i&&t.resolve(e),t.promise}},c=function(e){this.values=t({},e),this.definitions={}};c.prototype={register:function(n,r){for(var t=r.dependencies?new e(r.dependencies.length):[],o=t.length-1;o>=0;--o)t[o]=r.dependencies[o];return(this.values.hasOwnProperty(n)||this.definitions.hasOwnProperty(n))&&i("Duplicated provider "+n+" detected."),this.definitions[n]={fn:r.fn,dependencies:t,is_constructor:!!r.is_constructor},this},resolve:function(n,r){var t,s=this.values,c=this.definitions,a=r&&r.values||{},d=r&&r.definitions;return a.hasOwnProperty(n)?a[n]&&"JEEFO_PROMISE"===a[n].type?a[n]:u.when(a[n]):s.hasOwnProperty(n)?s[n]&&"JEEFO_PROMISE"===s[n].type?s[n]:u.when(s[n]):(t=o(n,function(e){return d&&d.hasOwnProperty(e)?d[e].dependencies:c.hasOwnProperty(e)?c[e].dependencies:void i("Injector '"+e+"' definition is not found.")}),u.for_each_async(t,function(n,r,t){var o,u;if(a.hasOwnProperty(n)||s.hasOwnProperty(n))return t();d&&d.hasOwnProperty(n)?(o=a,u=d[n]):(o=s,u=c[n]);for(var f=u.dependencies.length-1,p=new e(f+1);f>=0;--f)a.hasOwnProperty(u.dependencies[f])?p[f]=a[u.dependencies[f]]:s.hasOwnProperty(u.dependencies[f])?p[f]=s[u.dependencies[f]]:i("OMG");var h=u.fn.apply(null,p);u.is_constructor&&(h=new h),h&&"JEEFO_PROMISE"===h.type?h.then(function(e){o[n]=e,t()}):(o[n]=h,t())}).then(function(){return a.hasOwnProperty(n)?a[n]:s[n]}))},resolve_sync:function(n,r){var t,s=this,u=s.values,c=r&&r.values||{},a=s.definitions,d=r&&r.definitions;if(c.hasOwnProperty(n))return c[n];if(u.hasOwnProperty(n))return u[n];d&&d.hasOwnProperty(n)?t=c:a.hasOwnProperty(n)&&(t=u);for(var f=o(n,function(e){return d&&d.hasOwnProperty(e)?d[e].dependencies:a.hasOwnProperty(e)?a[e].dependencies:void i("Injector '"+e+"' definition is not found.")}),p=a[f.pop()],h=new e(p.dependencies.length),l=0;l<f.length;++l)c.hasOwnProperty(f[l])||u.hasOwnProperty(f[l])||s.resolve_sync(f[l],r);for(l=h.length-1;l>=0;--l)h[l]=c.hasOwnProperty(p.dependencies[l])?c[p.dependencies[l]]:u[p.dependencies[l]];return t[n]=p.fn.apply(null,h)}};var a=function(e,n,r,t){function o(e){return"$injector"===e||p.hasOwnProperty(e)||f.hasOwnProperty(e)}function s(e,r){return o(e)&&i("Duplicated provider '"+e+"' detected in module '"+module.name+"'."),n.register(e,r),t[e]=n.definitions[e],d}function c(t){return"$injector"===t?u.when(d):p.hasOwnProperty(t)?u.when(p[t]):f.hasOwnProperty(t)?n.resolve(t,r):void i("Module provider '"+t+"' definition is not found in '"+e+"' module.")}function a(t){return"$injector"===t?d:p.hasOwnProperty(t)?p[t]:f.hasOwnProperty(t)?n.resolve_sync(t,r):void i("Module provider '"+t+"' definition is not found in '"+e+"' module.")}var d=this,f=n.definitions,p=r.values;return d.has=o,d.resolve=c,d.register=s,d.resolve_sync=a,d},d=function(n,r,t){if("function"===typeof r)return{fn:r,name:n,dependencies:[]};if("string"===typeof r)return{fn:t,name:n,dependencies:[r]};for(var i=r.length-1,o=new e(i+1);i>=0;--i)o[i]=r[i];return{fn:t,name:n,dependencies:o}},f={},p={dependencies:[]},h={values:{$q:u,Array:e,Injector:c,is_array:n,"object.keys":r,"object.assign":t,make_injectable:d,"sorts.topological":o},definitions:{$q:p,Array:p,Injector:p,is_array:p,"object.keys":p,"object.assign":p,make_injectable:p,"sorts.topological":p}},l=function(n,r){function s(){var e=arguments[0],r=d.apply(null,arguments);return v.hasOwnProperty(e)&&i("'"+e+"' extends already registered in '"+n+"' module."),P[g++]=r,p(v,r),v}function p(n,r){var t=new e(r.dependencies.length);u.for_each_async(r.dependencies,function(e,n,r){E.resolve(e).then(function(e){t[n]=e,r()})}).then(function(){n[r.name]=r.fn.apply(n,t)})}f.hasOwnProperty(n)&&i("Duplicated module '"+n+"' is detected.");var l,y,w,v={name:n,extend:s},O=new c,P=[],g=0,_={},E=new a(n,O,h,_),m=[];for(y=o(n,function(e){return f[e]?f[e].requires:n===e?r:void i("'"+e+"' module is not found.")}),w=y.length>1?new e(y.length-1):[],l=0;l<w.length;++l)m=m.concat(f[y[l]].extenders),t(O.definitions,f[y[l]].new_definitions);for(f[n]={name:n,requires:r,instance:v,injector:O,extenders:P,public_injector:E,new_definitions:_},l=0;l<m.length;++l)p(v,m[l]);return v},y=function(){};return y.prototype={use:function(e){return e(this),this},module:function(e,r){return n(r)?l(e,r):(f.hasOwnProperty(e)||i("'"+e+"' module is not found."),f[e].instance)}},{create:function(){return new y}}}();window.jeefo=e.create()}();